{"is_source_file": true, "format": "TypeScript", "description": "This file defines various input schemas and utility functions for a chat-based API, including message schemas, request validation, and JSON parsing helpers.", "external_files": ["zod"], "external_methods": ["z.object", "z.enum", "z.string", "z.array", "z.safeParse", "Request.json"], "published": ["ChatHistoryMessageSchema", "ChatRequestSchema", "KnowledgeItemParamsSchema", "KnowledgeItemQuerySchema", "parseJsonSafe", "parseSearchParams"], "classes": [], "methods": [{"name": "export async function parseJsonSafe<T extends z.ZodTypeAny>( parseJsonSafe", "description": "Parses JSON request body with schema validation using Zod, returning success flag and data or error message.", "scope": "", "scopeKind": ""}, {"name": "export function parseSearchParams<T extends z.ZodTypeAny>( parseSearchParams", "description": "Validates URL search parameters against a Zod schema and returns parsed data or error message.", "scope": "", "scopeKind": ""}], "calls": ["req.json()", "schema.safeParse()"], "search-terms": ["ChatHistoryMessageSchema", "ChatRequestSchema", "KnowledgeItemParamsSchema", "KnowledgeItemQuerySchema", "parseJsonSafe", "parseSearchParams"], "state": 2, "file_id": 66, "knowledge_revision": 151, "git_revision": "", "ctags": [{"_type": "tag", "name": "ChatHistoryMessageSchema", "path": "/home/kavia/workspace/code-generation/connecto-v1/src/lib/schemas.ts", "pattern": "/^export const ChatHistoryMessageSchema = z.object({$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "ChatRequestSchema", "path": "/home/kavia/workspace/code-generation/connecto-v1/src/lib/schemas.ts", "pattern": "/^export const ChatRequestSchema = z.object({$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "KnowledgeItemParamsSchema", "path": "/home/kavia/workspace/code-generation/connecto-v1/src/lib/schemas.ts", "pattern": "/^export const KnowledgeItemParamsSchema = z.object({$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "KnowledgeItemQuerySchema", "path": "/home/kavia/workspace/code-generation/connecto-v1/src/lib/schemas.ts", "pattern": "/^export const KnowledgeItemQuerySchema = z.object({$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "json", "path": "/home/kavia/workspace/code-generation/connecto-v1/src/lib/schemas.ts", "pattern": "/^    const json = await req.json();$/", "language": "TypeScript", "kind": "constant", "scope": "parseJsonSafe", "scopeKind": "function"}, {"_type": "tag", "name": "k", "path": "/home/kavia/workspace/code-generation/connecto-v1/src/lib/schemas.ts", "pattern": "/^  for (const [k, v] of searchParams.entries()) raw[k] = v;$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "msg", "path": "/home/kavia/workspace/code-generation/connecto-v1/src/lib/schemas.ts", "pattern": "/^      const msg = parsed.error.issues.map((i) => i.message).join(\"; \");$/", "language": "TypeScript", "kind": "constant", "scope": "parseJsonSafe", "scopeKind": "function"}, {"_type": "tag", "name": "msg", "path": "/home/kavia/workspace/code-generation/connecto-v1/src/lib/schemas.ts", "pattern": "/^    const msg = parsed.error.issues.map((i) => i.message).join(\"; \");$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "parseJsonSafe", "path": "/home/kavia/workspace/code-generation/connecto-v1/src/lib/schemas.ts", "pattern": "/^export async function parseJsonSafe<T extends z.ZodTypeAny>($/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "parseSearchParams", "path": "/home/kavia/workspace/code-generation/connecto-v1/src/lib/schemas.ts", "pattern": "/^export function parseSearchParams<T extends z.ZodTypeAny>($/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "parsed", "path": "/home/kavia/workspace/code-generation/connecto-v1/src/lib/schemas.ts", "pattern": "/^    const parsed = schema.safeParse(json);$/", "language": "TypeScript", "kind": "constant", "scope": "parseJsonSafe", "scopeKind": "function"}, {"_type": "tag", "name": "parsed", "path": "/home/kavia/workspace/code-generation/connecto-v1/src/lib/schemas.ts", "pattern": "/^  const parsed = schema.safeParse(raw);$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "raw", "path": "/home/kavia/workspace/code-generation/connecto-v1/src/lib/schemas.ts", "pattern": "/^  const raw: Record<string, string> = {};$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "v", "path": "/home/kavia/workspace/code-generation/connecto-v1/src/lib/schemas.ts", "pattern": "/^  for (const [k, v] of searchParams.entries()) raw[k] = v;$/", "language": "TypeScript", "kind": "constant"}], "hash": "d4da58cdd8c7aae7352131a164f0d2bd", "format-version": 4, "code-base-name": "connecto-v1", "filename": "src/lib/schemas.ts", "revision_history": [{"151": ""}]}