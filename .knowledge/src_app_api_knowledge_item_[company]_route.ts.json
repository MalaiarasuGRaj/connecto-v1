{"is_source_file": true, "format": "TypeScript", "description": "This file defines an API route handler for fetching knowledge base items by company identifier. It processes HTTP GET requests, validates parameters, reads corresponding text files from the data directory, and returns the content in either raw text or JSON format.", "external_files": ["next/server", "fs", "path", "@/lib/logger", "@/lib/schemas"], "external_methods": ["NextRequest", "NextResponse", "withApiLogging", "KnowledgeItemParamsSchema.safeParse", "parseSearchParams", "fs.existsSync", "fs.readFileSync"], "published": [], "classes": [], "methods": [{"name": "GET", "description": "Handles GET requests for fetching knowledge base items, including parameter validation, file existence check, file reading, and response formatting."}], "calls": ["withApiLogging", "KnowledgeItemParamsSchema.safeParse", "parseSearchParams", "fs.existsSync", "fs.readFileSync", "NextResponse.json"], "search-terms": ["knowledge", "company", "route.ts", "get request", "file system", "fetch knowledge item"], "state": 2, "file_id": 59, "knowledge_revision": 153, "git_revision": "00092178e44ed85be16b433d6043887760ead3ac", "revision_history": [{"119": ""}, {"137": "edf1371341470e48b22d6de525292a7208cf69d9"}, {"144": "75158debfc5dd420aa6575873052d9de88461016"}, {"153": "00092178e44ed85be16b433d6043887760ead3ac"}], "ctags": [{"_type": "tag", "name": "GET", "path": "/home/kavia/workspace/code-generation/connecto-v1/src/app/api/knowledge/item/[company]/route.ts", "pattern": "/^export const GET = withApiLogging(async (req: NextRequest, log) => {$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "content", "path": "/home/kavia/workspace/code-generation/connecto-v1/src/app/api/knowledge/item/[company]/route.ts", "pattern": "/^    const content = fs.readFileSync(filePath, \"utf8\");$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "filePath", "path": "/home/kavia/workspace/code-generation/connecto-v1/src/app/api/knowledge/item/[company]/route.ts", "pattern": "/^  const filePath = path.join(process.cwd(), \"data\", `${safeName}.txt`);$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "queryParsed", "path": "/home/kavia/workspace/code-generation/connecto-v1/src/app/api/knowledge/item/[company]/route.ts", "pattern": "/^  const queryParsed = parseSearchParams(req.nextUrl.searchParams, KnowledgeItemQuerySchema);$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "safeName", "path": "/home/kavia/workspace/code-generation/connecto-v1/src/app/api/knowledge/item/[company]/route.ts", "pattern": "/^  const safeName = paramsParsed.data.company.replace(\\/[^a-z0-9_-]\\/gi, \"\");$/", "language": "TypeScript", "kind": "constant"}], "hash": "11244e538d0e7eccb8dbd70a4130e6b7", "format-version": 4, "code-base-name": "connecto-v1", "filename": "src/app/api/knowledge/item/[company]/route.ts"}